{% extends 'base.html' %}
{% load static %}

{% block title %}Clientes{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">Clientes</h1>
        <a href="{% url 'crm:customer_create' %}" class="btn btn-primary">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            Nuevo Cliente
        </a>
    </div>

    <!-- Filtros -->
    <div class="card bg-base-100 shadow-xl mb-6">
        <div class="card-body">
            <form hx-get="{% url 'crm:customer_list' %}" hx-target="#customer-table" hx-trigger="input delay:300ms, change">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="label">
                            <span class="label-text">Buscar</span>
                        </label>
                        <input type="text" name="q" value="{{ request.GET.q }}" 
                               placeholder="CÃ³digo, nombre o CUIT..." class="input input-bordered w-full">
                    </div>
                    <div>
                        <label class="label">
                            <span class="label-text">Tipo</span>
                        </label>
                        <select name="type" class="select select-bordered w-full">
                            <option value="">Todos</option>
                            {% for value, label in customer_types %}
                                <option value="{{ value }}" {% if request.GET.type == value %}selected{% endif %}>
                                    {{ label }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="label">
                            <span class="label-text">Estado</span>
                        </label>
                        <select name="is_active" class="select select-bordered w-full">
                            <option value="">Todos</option>
                            <option value="true" {% if request.GET.is_active == 'true' %}selected{% endif %}>Activos</option>
                            <option value="false" {% if request.GET.is_active == 'false' %}selected{% endif %}>Inactivos</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Tabla -->
    <div id="customer-table">
        {% include 'crm/partials/customer_table.html' %}
    </div>
</div>
{% endblock %}